<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Deterministic Area Coverage</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { margin:0; font: 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial; }
  header { padding: 20px; background: #0d6efd; color: #fff; }
  main { padding: 20px; max-width: 900px; margin: 0 auto; }
  .row { margin-bottom: 12px; }
  button { margin-right: 8px; padding: 8px 12px; border: 0; border-radius: 6px; background: #111827; color:#fff; }
  #overlay { position: fixed; left:0; top:0; width:100vw; height:0; background: #ef4444; opacity:.9; pointer-events:none; z-index:9999; }
  .hint { color:#555; font-size: 14px; }
</style>
</head>
<body>
<header><h1>Deterministic Area Coverage</h1></header>
<main>
  <p>Click a percentage or add <code>?p=25&mode=blur</code> to auto-apply on blur.</p>
  <div class="row">
    <button data-p="10">10%</button>
    <button data-p="25">25%</button>
    <button data-p="50">50%</button>
    <button data-p="75">75%</button>
    <button id="clear">Clear</button>
  </div>
  <p class="hint">Overlay fills the top portion of the viewport by the chosen percentage. This yields an approximate diff of that coverage.</p>
</main>
<div id="overlay"></div>
<script>
const overlay = document.getElementById('overlay');
function applyPercent(pct) {
  const clamped = Math.max(0, Math.min(100, +pct || 0));
  overlay.style.height = `${clamped}vh`;
  console.log(`Applied overlay: ${clamped}% of viewport.`);
}
function clearOverlay(){ overlay.style.height = '0'; }
document.querySelectorAll('button[data-p]').forEach(btn=>{
  btn.addEventListener('click', () => applyPercent(btn.dataset.p));
});
document.getElementById('clear').addEventListener('click', clearOverlay);

const params = new URLSearchParams(location.search);
const p = params.get('p');
const mode = params.get('mode');
let done = false;
if (mode === 'blur' && p) {
  window.addEventListener('blur', () => {
    if (done) return;
    setTimeout(()=>{ applyPercent(p); done = true; }, 800);
  });
}
</script>
</body>
</html>
